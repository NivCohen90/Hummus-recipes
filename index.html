<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <title>××—×©×‘×•×Ÿ ××ª×›×•× ×™× ×œ×—×•××•×¡</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="https://upload.wikimedia.org/wikipedia/commons/6/60/Hummus-plate.jpg" type="image/jpeg">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      direction: rtl;
      padding: 20px;
      background-color: #fdf6ec;
      color: #000;
      transition: background 0.3s, color 0.3s;
    }
    h1 {
      text-align: center;
      color: #6a4f3a;
    }
    label, select, input, button {
      font-size: 1.1em;
      margin: 10px 0;
    }
    #result {
      margin-top: 25px;
      white-space: pre-line;
      background: #fff8f0;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px #ccc;
    }
    .dark-mode {
      background-color: #1c1c1c;
      color: #eee;
    }
    .dark-mode #result {
      background-color: #2c2c2c;
      color: #ddd;
    }
    button {
      padding: 5px 15px;
    }
    .top-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: flex-end;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

<div class="top-buttons">
  <button onclick="toggleLang()">ğŸŒ English / ×¢×‘×¨×™×ª</button>
  <button onclick="toggleDarkMode()">ğŸŒ“ ××¦×‘ ×œ×™×œ×”</button>
  <button onclick="saveAsFavorite()">â­ ×©××•×¨ ×‘××•×¢×“×¤×™×</button>
</div>

<h1 id="main-title">ğŸ§† ××—×©×‘×•×Ÿ ××ª×›×•× ×™× ×œ×—×•××•×¡</h1>

<label for="recipeType" id="label-recipe">×‘×—×¨ ××ª×›×•×Ÿ:</label>
<select id="recipeType">
  <option value="classic">×—×•××•×¡ ×§×œ××¡×™</option>
  <option value="mesabaha">××¡×‘×—×”</option>
  <option value="ful">×—×•××•×¡ ×¤×•×œ</option>
  <option value="sabich">×¡×‘×™×—</option>
</select>

<br>

<label for="gramsInput" id="label-grams">×”×›× ×¡ ××ª ××©×§×œ ×’×¨×’×¨×™ ×”×—×•××•×¡ (×™×‘×©, ×‘×’×¨××™×):</label>
<br>
<input type="number" id="gramsInput" value="250" min="100" step="50">
<button onclick="generateRecipe()" id="btn-generate">×—×©×‘ ××ª×›×•×Ÿ</button>
<button onclick="downloadPDF()">ğŸ“¥ ×”×•×¨×“ ×›-PDF</button>

<div id="result"></div>
<div id="extra-buttons" style="margin-top:10px; display:none;">
  <button onclick="shareWhatsApp()">ğŸ“² ×©×ª×£ ×‘×•×•××˜×¡××¤</button>
</div>

<script>
let isEnglish = false;

function toggleLang() {
  isEnglish = !isEnglish;
  document.getElementById('main-title').innerText = isEnglish ? "ğŸ§† Hummus Recipe Calculator" : "ğŸ§† ××—×©×‘×•×Ÿ ××ª×›×•× ×™× ×œ×—×•××•×¡";
  document.getElementById('label-recipe').innerText = isEnglish ? "Select Recipe:" : "×‘×—×¨ ××ª×›×•×Ÿ:";
  document.getElementById('label-grams').innerText = isEnglish ? "Enter weight of dry chickpeas (grams):" : "×”×›× ×¡ ××ª ××©×§×œ ×’×¨×’×¨×™ ×”×—×•××•×¡ (×™×‘×©, ×‘×’×¨××™×):";
  document.getElementById('btn-generate').innerText = isEnglish ? "Calculate Recipe" : "×—×©×‘ ××ª×›×•×Ÿ";

  const options = document.querySelectorAll('#recipeType option');
  options[0].text = isEnglish ? "Classic Hummus" : "×—×•××•×¡ ×§×œ××¡×™";
  options[1].text = isEnglish ? "Musabaha" : "××¡×‘×—×”";
  options[2].text = isEnglish ? "Hummus Ful" : "×—×•××•×¡ ×¤×•×œ";
  options[3].text = isEnglish ? "Sabich" : "×¡×‘×™×—";
}

function toggleDarkMode() {
  document.body.classList.toggle('dark-mode');
}

function saveAsFavorite() {
  const url = window.location.href;
  const title = document.title;
  try {
    if (window.external && ('AddFavorite' in window.external)) {
      window.external.AddFavorite(url, title);
    } else {
      alert(isEnglish ? "Use your browser's menu to bookmark this page." : "×”×©×ª××© ×‘×ª×¤×¨×™×˜ ×”×“×¤×“×¤×Ÿ ×›×“×™ ×œ×©××•×¨ ××ª ×”×“×£ ×‘××•×¢×“×¤×™×.");
    }
  } catch (e) {
    alert(isEnglish ? "Bookmarking not supported on this browser." : "×”×“×¤×“×¤×Ÿ ×œ× ×ª×•××š ×‘×©××™×¨×” ×œ××•×¢×“×¤×™×.");
  }
}

function shareWhatsApp() {
  const text = document.getElementById('result').innerText;
  const url = window.location.href;
  const fullText = `${text}\n\n${url}`;
  const encoded = encodeURIComponent(fullText);
  window.open(`https://wa.me/?text=${encoded}`, '_blank');
}

function downloadPDF() {
  const element = document.getElementById("result");
  const opt = {
    margin: 1,
    filename: 'hummus_recipe.pdf',
    image: { type: 'jpeg', quality: 0.98 },
    html2canvas: { scale: 2 },
    jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
  };
  html2pdf().set(opt).from(element).save();
}

function generateRecipe() {
  const grams = parseInt(document.getElementById('gramsInput').value);
  const recipeType = document.getElementById('recipeType').value;
  const resultDiv = document.getElementById('result');
  const shareBtn = document.getElementById('extra-buttons');

  if (isNaN(grams) || grams < 100) {
    resultDiv.innerText = isEnglish ? "âš ï¸ Please enter a valid weight (min 100g)" : "âš ï¸ × × ×œ×”×–×™×Ÿ ××¡×¤×¨ ×ª×§× ×™ (××¢×œ 100 ×’×¨×)";
    shareBtn.style.display = "none";
    return;
  }

  const factor = grams / 250;
  const servings = Math.round(factor * 3);
  let output = isEnglish
    ? `ğŸ“„ Recipe for ${getRecipeName(recipeType)} using ${grams}g:\nğŸ½ï¸ Estimated servings: ${servings}â€“${servings + 2}\n\n`
â€    : `ğŸ§¾ ××ª×›×•×Ÿ ×œ-${getRecipeName(recipeType)} ×œ×¤×™ ${grams} ×’×¨×:\nğŸ½ï¸ ××¡×¤×¨ ×× ×•×ª ××©×•×¢×¨: ${servings}â€“${servings + 2}\n\n`;

  switch (recipeType) {
    case 'classic': output += generateClassicRecipe(factor); break;
    case 'mesabaha': output += generateMesabahaRecipe(factor); break;
    case 'ful': output += generateFulRecipe(factor); break;
    case 'sabich': output += generateSabichRecipe(factor); break;
    default: output += isEnglish ? "Recipe not found." : "××ª×›×•×Ÿ ×œ× ×–××™×Ÿ.";
  }

  resultDiv.innerText = output;
  shareBtn.style.display = "block";
}

function getRecipeName(type) {
  const names = {
    classic: isEnglish ? "Classic Hummus" : "×—×•××•×¡ ×§×œ××¡×™",
    mesabaha: isEnglish ? "Musabaha" : "××¡×‘×—×”",
    ful: isEnglish ? "Hummus Ful" : "×—×•××•×¡ ×¤×•×œ",
    sabich: isEnglish ? "Sabich" : "×¡×‘×™×—"
  };
  return names[type] || "";
}

function generateClassicRecipe(f) {
  const tahini = (0.75 * f).toFixed(2);
  const lemon = (0.25 * f).toFixed(2);
  const garlic = Math.round(2 * f);
  const salt = (1 * f).toFixed(2);
  const cumin = (0.5 * f).toFixed(2);
  const soak = (1 * f).toFixed(2);
  const cook = (0.5 * f).toFixed(2);
  const water = (0.75 * f).toFixed(2);

  return isEnglish ? `
Step 1 â€“ Soaking:
- Rinse chickpeas and soak with ${soak} tsp baking soda for 12â€“24 hours.

Step 2 â€“ Cooking:
- Cook with fresh water and ${cook} tsp baking soda until very soft.
- Save ${water} cups of cooking water.

Step 3 â€“ Blending:
- Blend hot chickpeas with:
  â€¢ ${tahini} cups tahini
  â€¢ ${lemon} cups lemon juice
  â€¢ ${garlic} garlic cloves
  â€¢ ${salt} tsp salt
  â€¢ ${cumin} tsp cumin
  â€¢ Add cooking water gradually

Step 4 â€“ Cool & serve:
- Refrigerate 1 hour before serving.
  ` : `
â€ğŸ“Œ ×©×œ×‘ 1 â€“ ×”×©×¨×™×™×”:
â€- ×©×•×˜×¤×™× ××ª ×”×’×¨×’×¨×™× ×•××©×¨×™× ×‘×”×¨×‘×” ××™× ×¢× ${soak} ×›×¤×™×•×ª ×¡×•×“×” ×œ×©×ª×™×™×” ×œ-12â€“24 ×©×¢×•×ª.

â€ğŸ“Œ ×©×œ×‘ 2 â€“ ×‘×™×©×•×œ:
â€- ××‘×©×œ×™× ××ª ×”×’×¨×’×¨×™× ×‘××™× ×—×“×©×™× ×¢× ${cook} ×›×¤×™×•×ª ×¡×•×“×” ×œ×©×ª×™×™×” ×¢×“ ×œ×¨×™×›×•×š ××•×—×œ×˜.
â€- ×©×•××¨×™× ${water} ×›×•×¡×•×ª ×××™ ×”×‘×™×©×•×œ.

â€ğŸ“Œ ×©×œ×‘ 3 â€“ ×˜×—×™× ×”:
â€- ×˜×•×—× ×™× ××ª ×”×’×¨×’×¨×™× ×”×—××™× ×™×—×“ ×¢×:
  â€¢ ${tahini} ×›×•×¡×•×ª ×˜×—×™× ×”
  â€¢ ${lemon} ×›×•×¡×•×ª ××™×¥ ×œ×™××•×Ÿ
  â€¢ ${garlic} ×©×™× ×™ ×©×•×
  â€¢ ${salt} ×›×¤×™×•×ª ××œ×—
  â€¢ ${cumin} ×›×¤×™×•×ª ×›××•×Ÿ
â€  â€¢ ××•×¡×™×¤×™× ×××™ ×”×‘×™×©×•×œ ×¢×“ ×œ××¨×§× ×§×¨××™

â€ğŸ“Œ ×©×œ×‘ 4 â€“ ×§×™×¨×•×¨:
â€- ××§×¨×¨×™× ×©×¢×” ×œ×¤× ×™ ×”×’×©×”.
`;
}

function generateMesabahaRecipe(f) {
  const tahini = (0.5 * f).toFixed(2);
  const lemon = (0.25 * f).toFixed(2);
  const garlic = Math.round(1 * f);
  const salt = (0.5 * f).toFixed(2);
  const cumin = (0.5 * f).toFixed(2);
  const soak = (1 * f).toFixed(2);
  const cook = (0.5 * f).toFixed(2);
  const water = (0.5 * f).toFixed(2);

  return isEnglish ? `
- Soak and cook chickpeas like in classic hummus.
- Mix tahini (${tahini} cups), lemon juice (${lemon}), garlic (${garlic}), salt (${salt}), cumin (${cumin}), and ${water} cups cooking water.
- Add whole warm chickpeas on top. Serve warm.
  ` : `
â€ğŸ“Œ ×©×œ×‘×™× ×–×”×™× ×œ×‘×™×©×•×œ ×›××• ×‘×—×•××•×¡ ×§×œ××¡×™.

â€ğŸ“Œ ××•×¡×™×¤×™× ×œ×§×¢×¨×”:
- ${tahini} ×›×•×¡×•×ª ×˜×—×™× ×”
- ${lemon} ×›×•×¡×•×ª ××™×¥ ×œ×™××•×Ÿ
- ${garlic} ×©×™× ×™ ×©×•× ×›×ª×•×©
- ${salt} ×›×¤×™×•×ª ××œ×—
- ${cumin} ×›×¤×™×•×ª ×›××•×Ÿ
- ${water} ×›×•×¡×•×ª ×××™ ×”×‘×™×©×•×œ

â€ğŸ“Œ ××•×¡×™×¤×™× ×’×¨×’×¨×™× ×—××™× ×©×œ××™× ××¢×œ. ××’×™×©×™× ×—×.
`;
}

function generateFulRecipe(f) {
  const tahini = (0.75 * f).toFixed(2);
  const lemon = (0.33 * f).toFixed(2);
  const garlic = Math.round(2 * f);
  const salt = (1 * f).toFixed(2);
  const cumin = (0.5 * f).toFixed(2);

  return isEnglish ? `
- Prepare classic hummus.
- Cook fava beans with cumin, lemon juice and garlic.
- Top hummus with warm fava beans. Add olive oil and parsley.
  ` : `
â€ğŸ“Œ ××›×™× ×™× ×—×•××•×¡ ×¨×’×™×œ ×œ×¤×™ ×”××ª×›×•×Ÿ.

â€ğŸ“Œ ××‘×©×œ×™× ×¤×•×œ ×¢× ×›××•×Ÿ, ××™×¥ ×œ×™××•×Ÿ, ×©×•× ×•××œ×—.

â€ğŸ“Œ ×™×•×¦×§×™× ××¢×œ ×”×—×•××•×¡, ××•×¡×™×¤×™× ×©××Ÿ ×–×™×ª ×•×¤×˜×¨×•×–×™×œ×™×”.
`;
}

function generateSabichRecipe(f) {
  return isEnglish ? `
- Prepare classic hummus.
- Fry eggplant slices.
- Cook hard boiled eggs.
- Serve hummus topped with eggplant, eggs, tahini, amba, salad.
  ` : `
â€ğŸ“Œ ××›×™× ×™× ×—×•××•×¡ ×œ×¤×™ ×”××ª×›×•×Ÿ ×”×¨×’×™×œ.

â€ğŸ“Œ ××˜×’× ×™× ×—×¦×™×œ×™× ×¤×¨×•×¡×™× ×¢×“ ×œ×”×©×—××”.

â€ğŸ“Œ ××‘×©×œ×™× ×‘×™×¦×™× ×§×©×•×ª.

â€ğŸ“Œ ××’×™×©×™× ×—×•××•×¡ ×¢× ×—×¦×™×œ, ×‘×™×¦×™×, ×˜×—×™× ×”, ×¢××‘×” ×•×¡×œ×˜ ×§×¦×•×¥.
`;
}
</script>

<footer style="margin-top:40px; font-size:0.9em; text-align:center;">
â€  ×’×¨×¡×” 1.0 | ×¢×•×“×›×Ÿ ×œ××—×¨×•× ×”: ×™×•× ×™ 2025 | × ×‘× ×” ×‘××”×‘×” ×œ×—×•××•×¡ ğŸ‹
</footer>

</body>
</html>
